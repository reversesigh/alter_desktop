#!/bin/bash

# ALTER_desktop-0.0.5-alpha - An Unofficial Desktop App for Linux-x64 wrapped with 'nativefier'

## resources/scrollbar.css injection script from https://gist.github.com/febritecno/82ec55602ccd2cbb08ef69fa4c863d46/

## Loading Vairables    
     echo
     source resources/variables
     $COMM0
     
## Intro
     echo
     echo  
     $EP9
     echo
     echo
     $DV2
     echo
     $EP1
     echo
     $DV2


## Checks for Nativefier via npm. If not found then uses npm to install Nativefier.
     echo
     $EP7
     echo
     
if ! $IT8 >/dev/null; then

     $IT1
     echo
     $IT2
     $COMM1 "$@"
   else
     $IT3

fi

     echo
     $DV2
     echo

## Creates ALTER.desktop to local applications folder, allowing it to be discoverable in your applications list
     echo
if ! $IT0 >/dev/null; then
   echo $CT3
   else
     $CT2

fi   
     $EP2
cat <<EOF >> ~/.local/share/applications/ALTER.desktop
[Desktop Entry]
Encoding=UTF-8
Version=1.0
Type=Application
Terminal=false
Exec=$HOME/.local/share/ALTER_desktop/ALTER_desktop
Name=ALTER
Icon=$HOME/.local/share/icons/alter.png
EOF
     echo
     cat $HOME/.local/share/applications/ALTER.desktop

## Copies alter.png to your root icons folder to use the ALTER logo as the ALTER_dekstop icon
     $DV2
     echo
     $EP3
     $COMM3
     echo
     $DV2

## Creates wrapped web application using nativefier
     $EP4
     echo
     echo
     $EP8
     echo
     echo
     $COMM4
     $COMM5
     echo
     $DV2

## Move ALTER-linux-x64 to ALTER_desktop
     echo
     $EP5
     $COMM6
     echo

## Copying ALTER_desktop to $HOME/.local/ALTER_desktop
     $EP6
     $COMM7
     $COMM8
     $COMM9
echo



## Checks to make sure installing ALTER_desktop was a success
if $IT9 2>/dev/null; then
     $IT4
     $IT6
     exit
     $DV2
   else
     echo
     echo
     $IT5
     echo
     echo
     $IT7
     echo
fi

     $DV2
     echo
     $PM1
     echo
     $PM2
     echo
     $PM3
     echo
     $PM4
     echo
     echo
     $PM5
